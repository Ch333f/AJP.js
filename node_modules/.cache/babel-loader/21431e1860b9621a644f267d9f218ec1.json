{"ast":null,"code":"(function () {\n  var forms = document.querySelectorAll('.php-email-form');\n  forms.forEach(function (e) {\n    e.addEventListener('submit', function (event) {\n      event.preventDefault();\n      var thisForm = this;\n      var action = thisForm.getAttribute('action');\n      var recaptcha = thisForm.getAttribute('data-recaptcha-site-key');\n      if (!action) {\n        displayError(thisForm, 'The form action property is not set!');\n        return;\n      }\n      thisForm.querySelector('.loading').classList.add('d-block');\n      thisForm.querySelector('.error-message').classList.remove('d-block');\n      thisForm.querySelector('.sent-message').classList.remove('d-block');\n      var formData = new FormData(thisForm);\n      if (recaptcha) {\n        if (typeof recaptcha !== \"undefined\") {\n          recaptcha.ready(function () {\n            try {\n              recaptcha.execute(recaptcha, {\n                action: 'php_email_form_submit'\n              }).then(function (token) {\n                formData.set('recaptcha-response', token);\n                php_email_form_submit(thisForm, action, formData);\n              });\n            } catch (error) {\n              displayError(thisForm, error);\n            }\n          });\n        } else {\n          displayError(thisForm, 'The reCaptcha javascript API url is not loaded!');\n        }\n      } else {\n        php_email_form_submit(thisForm, action, formData);\n      }\n    });\n  });\n  function php_email_form_submit(thisForm, action, formData) {\n    fetch(action, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest'\n      }\n    }).then(function (response) {\n      return response.text();\n    }).then(function (data) {\n      thisForm.querySelector('.loading').classList.remove('d-block');\n      if (data.trim() === 'OK') {\n        thisForm.querySelector('.sent-message').classList.add('d-block');\n        thisForm.reset();\n      } else {\n        throw new Error(data ? data : 'Form submission failed and no error message returned from: ' + action);\n      }\n    }).catch(function (error) {\n      displayError(thisForm, error);\n    });\n  }\n  function displayError(thisForm, error) {\n    thisForm.querySelector('.loading').classList.remove('d-block');\n    thisForm.querySelector('.error-message').innerHTML = error;\n    thisForm.querySelector('.error-message').classList.add('d-block');\n  }\n})();","map":{"version":3,"names":["forms","document","querySelectorAll","forEach","e","addEventListener","event","preventDefault","thisForm","action","getAttribute","recaptcha","displayError","querySelector","classList","add","remove","formData","FormData","ready","execute","then","token","set","php_email_form_submit","error","fetch","method","body","headers","response","text","data","trim","reset","Error","catch","innerHTML"],"sources":["C:/Users/Mr O/Desktop/devspace/AJP/src/static/assets/js/Contact.js"],"sourcesContent":["\r\n(function () {\r\n    let forms = document.querySelectorAll('.php-email-form');\r\n\r\n    forms.forEach(function (e) {\r\n        e.addEventListener('submit', function (event) {\r\n            event.preventDefault();\r\n\r\n            let thisForm = this;\r\n\r\n            let action = thisForm.getAttribute('action');\r\n            let recaptcha = thisForm.getAttribute('data-recaptcha-site-key');\r\n\r\n            if (!action) {\r\n                displayError(thisForm, 'The form action property is not set!')\r\n                return;\r\n            }\r\n            thisForm.querySelector('.loading').classList.add('d-block');\r\n            thisForm.querySelector('.error-message').classList.remove('d-block');\r\n            thisForm.querySelector('.sent-message').classList.remove('d-block');\r\n\r\n            let formData = new FormData(thisForm);\r\n\r\n            if (recaptcha) {\r\n                if (typeof recaptcha !== \"undefined\") {\r\n                    recaptcha.ready(function () {\r\n                        try {\r\n                            recaptcha.execute(recaptcha, { action: 'php_email_form_submit' })\r\n                                .then(token => {\r\n                                    formData.set('recaptcha-response', token);\r\n                                    php_email_form_submit(thisForm, action, formData);\r\n                                })\r\n                        } catch (error) {\r\n                            displayError(thisForm, error)\r\n                        }\r\n                    });\r\n                } else {\r\n                    displayError(thisForm, 'The reCaptcha javascript API url is not loaded!')\r\n                }\r\n            } else {\r\n                php_email_form_submit(thisForm, action, formData);\r\n            }\r\n        });\r\n    });\r\n\r\n    function php_email_form_submit(thisForm, action, formData) {\r\n        fetch(action, {\r\n            method: 'POST',\r\n            body: formData,\r\n            headers: { 'X-Requested-With': 'XMLHttpRequest' }\r\n        })\r\n            .then(response => {\r\n                return response.text();\r\n            })\r\n            .then(data => {\r\n                thisForm.querySelector('.loading').classList.remove('d-block');\r\n                if (data.trim() === 'OK') {\r\n                    thisForm.querySelector('.sent-message').classList.add('d-block');\r\n                    thisForm.reset();\r\n                } else {\r\n                    throw new Error(data ? data : 'Form submission failed and no error message returned from: ' + action);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                displayError(thisForm, error);\r\n            });\r\n    }\r\n\r\n    function displayError(thisForm, error) {\r\n        thisForm.querySelector('.loading').classList.remove('d-block');\r\n        thisForm.querySelector('.error-message').innerHTML = error;\r\n        thisForm.querySelector('.error-message').classList.add('d-block');\r\n    }\r\n\r\n})();\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}